package {	import com.greensock.events.LoaderEvent;	import com.greensock.loading.data.SWFLoaderVars;	import com.greensock.loading.SWFLoader;	import com.greensock.TweenMax;	import com.nanaimostudio.utils.TraceUtility;	import flash.display.MovieClip;	import org.casalib.display.CasaSprite;	import org.casalib.util.StageReference;	import org.casalib.util.FlashVarUtil;	import com.nanaimostudio.utils.fluidLayout.FluidObject;		/**	 * ...	 * @author Boon Chew	 */	public class Preloader extends CasaSprite	{		public var progressIndicator:MovieClip;				public function Preloader() 		{			StageReference.setStage(this.stage);			init();		}				private function init():void 		{			var swf:String = "";			if (FlashVarUtil.hasKey("swf"))			{				swf = String(FlashVarUtil.getValue("swf"));			}			else			{				swf = "52mmnts.swf";			}						var swfLoader:SWFLoader = new SWFLoader(swf, { name: swf, container:this, width:stage.stageWidth, height: stage.stageHeight, onComplete: completeHandler, onProgress: progressHandler } );			swfLoader.load();						new FluidObject(progressIndicator, { x: 0.5, y: 0.5, offsetX: 0, offsetY: 0 } );		}				function progressHandler(event:LoaderEvent):void		{			if (event.target.progress == 0) return;			progressIndicator.percent.text = String(Math.floor(event.target.progress * 100));		}		function completeHandler(event:LoaderEvent):void		{			progressIndicator.percent.text = "100";			TweenMax.to(progressIndicator, 0.3, { autoAlpha: 0 } );		}		function errorHandler(event:LoaderEvent):void		{			TraceUtility.debug(this, "error occured with " + event.target + ": " + event.text);		}			}}