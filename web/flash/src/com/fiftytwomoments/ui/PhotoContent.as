package com.fiftytwomoments.ui {	import com.fiftytwomoments.DisplayContents;	import com.greensock.loading.ImageLoader;	import com.greensock.loading.LoaderMax;	import com.nanaimostudio.utils.TraceUtility;	import flash.events.MouseEvent;	import org.casalib.display.CasaBitmap;	import org.casalib.display.CasaMovieClip;	import org.casalib.display.CasaSprite;	import flash.text.TextField;	import mx.core.BitmapAsset;		/**	 * ...	 * @author Boon Chew	 */	public class PhotoContent extends CasaMovieClip	{		public var captionTitle:TextField;		public var captionText:TextField;				public var photoTitle:TextField;		public var photo:CasaSprite;				private var bitmap:CasaBitmap;		private var _week:int;		private var _interactionDelegate:Object;		private var _useDefaultText:Boolean;		private var imageLoader:ImageLoader;						public function PhotoContent() 		{			photo = new CasaSprite();			photo.name = "photo";			addChild(photo);						this.mouseChildren = false;			this.interactionEnabled = false;		}				public function set useDefaultText(value:Boolean):void		{			_useDefaultText = value;		}				private function onClick(e:MouseEvent):void 		{			//TraceUtility.debug(this, "onClick " + _interactionDelegate + " " + Boolean(_interactionDelegate is DisplayContents) + " " + _interactionDelegate.hasOwnProperty("onPhotoContentClicked"));			if (_interactionDelegate != null)			{				if (_interactionDelegate.hasOwnProperty("onPhotoContentClicked"))				{					_interactionDelegate.onPhotoContentClicked(this);				}			}		}				public function set interactionEnabled(value:Object):void 		{			this.buttonMode = value;			this.mouseEnabled = value;						if (value)			{				this.addEventListener(MouseEvent.CLICK, onClick);			}			else			{				this.removeEventListener(MouseEvent.CLICK, onClick);			}		}				public function set interactionDelegate(value:Object):void		{			_interactionDelegate = value;		}				public function setPhoto(value:String, week:int = 1, caption:String = ""):void		{			//bitmap = new CasaBitmap(value.bitmapData);			//bitmap.x = -bitmap.width * 0.5;			//bitmap.y = -bitmap.height * 0.5;			//photo.addChild(bitmap);			TraceUtility.debug(this, "loading  " + value);			imageLoader = new ImageLoader(value, { x:-320, y:-212, width:640, height:424, container:photo, scaleMode:"proportionalInside", bgColor:0xFFFFFF } );			imageLoader.load(true);			photoTitle.visible = false;						captionTitle.text = "Moment " + String(week) + " //";						//TODO: Remove later			if (caption == "")			{				caption = "It’s time to act, to learn and grow—to find yourself, and figure out where it is you want to go. Regroup, refocus, and share it with us.";			}						captionText.text = caption;		}				public function removePhoto():void		{			photo.removeAllChildren(true);			photoTitle.visible = true;		}				public function hasPhoto():Boolean		{			return photo.numChildren > 0;		}				public function set week(value:int):void 		{			_week = value;						if (_useDefaultText)			{				photoTitle.text = "moment " + _week;			}			else			{				photoTitle.text = "";			}		}				public function get week():int 		{			return _week;		}	}}